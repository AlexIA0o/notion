<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calendario Pastel</title>

<style>
/* Fuente redondita */
* {
  font-family: "Segoe UI", "Helvetica Neue", "Arial Rounded MT Bold", "Verdana", sans-serif !important;
}

/* Fondo general */
body {
  background: #FFFFFF !important;
  margin: 0;
  height: 100vh;
  color: #4A473F;
}

/* Contenedor */
.wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100%;
}

/* Tarjeta del calendario */
#calendari {
  width: 250px;
  height: 300px;
  overflow: hidden;
  position: relative;
  border-radius: 20px;
  background: #FDFBF4;
}

/* Tablas */
table {
  border-collapse: collapse;
  table-layout: fixed;
  width: 250px;
  background: #FDFBF4;
  position: absolute;
  top: 0;
  left: 0;
  transition: all 0.3s ease;
  border-radius: 20px;
}

table.actiu { transform: translateX(0); }
table.amagat-esquerra { transform: translateX(-260px); }
table.amagat-dreta { transform: translateX(260px); }
table.inactiu {}

/* Cabecera Mes/Año */
tr:first-child th {
  background: #F5D26A;
  padding: 12px 0 16px;
  font-size: 18px;
  color: #345060;
  position: relative;
  font-weight: 700;
}

th .any {
  font-size: 12px;
  color: rgba(52,80,96,0.7);
}

/* Días de la semana */
tr:nth-child(2) th {
  background: #F9E6A7;
  padding: 6px 0;
  font-weight: 600;
  color: #4A473F;
}

/* Celdas */
td {
  padding: 0;
}

td > span {
  display: block;
  margin: 2px 5px;
  padding: 7px 0;
  border-radius: 10px;
  color: #4A473F;
  border: 2px solid transparent;
  transition: 0.25s;
}

/* Alternar celeste */
td:nth-child(even) > span {
  background: rgba(167,215,249,0.14);
}

/* Fin de semana */
td:nth-child(6) > span,
td:last-child > span {
  color: #7BB9DC;
}

/* Día actual */
td.avui > span {
  background: #F5D26A;
  color: white;
  font-weight: 700;
  border: 2px solid #EAC75D;
}

/* Días fuera del mes */
td.fora > span {
  opacity: 0.3;
}

/* Hover */
td > span:hover {
  background: #7BB9DC;
  color: #fff;
  border-color: #7BB9DC;
}

/* Botones */
.boto-prev, .boto-next {
  position: absolute;
  top: 10px;
  width: 32px;
  height: 32px;
  background: white;
  border-radius: 999px;
  border: 2px solid #A7D7F9;
  color: #7BB9DC;
  font-size: 18px;
  box-shadow: 0 4px 12px rgba(167,215,249,0.25);
}

.boto-prev { left: 10px; }
.boto-next { right: 10px; }

.boto-prev:hover,
.boto-next:hover {
  background: #A7D7F9;
  color: white;
  border-color: #7BB9DC;
}

button { cursor: pointer; }
button:focus { outline: none; }
</style>
</head>

<body>
<div class="wrapper">
  <div id="calendari"></div>
</div>

<script>
/* Meses */
var mesos = [
  'Enero','Febrero','Marzo','Abril','Mayo','Junio',
  'Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'
];

/* Días */
var dies_abr = ['Do','Lu','Ma','Mi','Ju','Vi','Sa'];

Number.prototype.pad = function(num){
  let s="";
  for(let i=0;i<num-this.toString().length;i++) s+="0";
  return s+this.toString();
}

/* FUNCIÓN CALENDARIO */
function calendari(widget, data) {

  var original = widget.getElementsByClassName("actiu")[0];

  if (!original) {
    original = document.createElement("table");
    original.setAttribute("data-actual",
      data.getFullYear() + "/" +
      data.getMonth().pad(2) + "/" +
      data.getDate().pad(2)
    );
    original.className = "actiu";
    widget.appendChild(original);
  }

  var diff = data - new Date(original.getAttribute("data-actual"));
  diff = new Date(diff).getMonth();

  var e = document.createElement("table");
  e.className = diff === 0 ? "amagat-esquerra" : "amagat-dreta";
  widget.appendChild(e);

  e.setAttribute("data-actual",
    data.getFullYear() + "/" +
    data.getMonth().pad(2) + "/" +
    data.getDate().pad(2)
  );

  /* Encabezado */
  var fila = document.createElement("tr");
  var th = document.createElement("th");
  th.setAttribute("colspan", 7);

  var btnPrev = document.createElement("button");
  btnPrev.className = "boto-prev";
  btnPrev.innerHTML = "&#9666;";

  var titulo = document.createElement("span");
  titulo.innerHTML = meses[data.getMonth()] +
    '<span class="any">' + data.getFullYear() + '</span>';

  var btnNext = document.createElement("button");
  btnNext.className = "boto-next";
  btnNext.innerHTML = "&#9656;";

  th.appendChild(btnPrev);
  th.appendChild(titulo);
  th.appendChild(btnNext);

  fila.appendChild(th);
  e.appendChild(fila);

  btnPrev.onclick = function(){
    data.setMonth(data.getMonth() - 1);
    calendari(widget, data);
  };

  btnNext.onclick = function(){
    data.setMonth(data.getMonth() + 1);
    calendari(widget, data);
  };

  /* Días de la semana */
  fila = document.createElement("tr");
  for (let i = 1; i < 7; i++)
    fila.innerHTML += "<th>" + dies_abr[i] + "</th>";
  fila.innerHTML += "<th>" + dies_abr[0] + "</th>";
  e.appendChild(fila);

  /* Días */
  var inici = new Date(data.getFullYear(), data.getMonth(), -1).getDay();
  var actual = new Date(data.getFullYear(), data.getMonth(), -inici);

  for (let s = 0; s < 6; s++) {
    var fila = document.createElement("tr");
    for (let d = 0; d < 7; d++) {
      var td = document.createElement("td");
      var span = document.createElement("span");
      td.appendChild(span);

      span.innerText = actual.getDate();

      if (actual.getMonth() !== data.getMonth())
        td.className = "fora";

      let hoy = new Date();
      if (
        actual.getDate() == hoy.getDate() &&
        actual.getMonth() == hoy.getMonth() &&
        actual.getFullYear() == hoy.getFullYear()
      ) {
        td.className = "avui";
      }

      actual.setDate(actual.getDate() + 1);
      fila.appendChild(td);
    }
    e.appendChild(fila);
  }

  setTimeout(function(){
    e.className = "actiu";
    original.className += diff === 0 ? " amagat-dreta" : " amagat-esquerra";
  }, 20);

  original.className = "inactiu";

  setTimeout(function(){
    var eliminar = document.getElementsByClassName("inactiu");
    while (eliminar.length > 0) eliminar[0].remove();
  }, 300);
}

/* INICIAR */
calendari(document.getElementById("calendari"), new Date());
</script>

</body>
</html>

